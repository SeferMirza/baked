<#@ template debug="false" hostspecific="true" language="C#" #>
<#@ assembly name="System.Core" #>
<#@ import namespace="System" #>
<#@ import namespace="System.IO" #>
<#@ output extension=".cs" #>
#pragma warning disable SA1649 // File name should match first type name
using Do.Orm;

namespace Do.Test;

<# for (int i = 0; i < 1000; ++i) { #>
public class <#= GetClassName(i) #>
{
    IEntityContext<<#= GetClassName(i) #>> _context = default!;

    protected <#= GetClassName(i) #>() { }

    public <#= GetClassName(i) #>(IEntityContext<<#= GetClassName(i) #>> context) => _context = context;

    public virtual Guid Id { get; set; }
    public virtual string Name { get; set; } = default!;
    public virtual DateTime CreatedAt { get; set; }

    protected internal virtual <#= GetClassName(i) #> With(string name)
    {
        Name = name;

        return _context.Insert(this);
    }
}

<# } #>
#pragma warning restore SA1649 // File name should match first type name
<#+
private string GetClassName(int i)
{
    return $"Entity{i}";
}
#>